<div class="field is-horizontal is-grouped mb-6">
  <form [formGroup]="alunoForm" (ngSubmit)="submit()" novalidate class="field-body">
    <div class="field">
      <label class="label">Nome</label>
      <p class="control is-expanded has-icons-left">
        <input formControlName="nome" class="input" type="text" placeholder="Nome">
        <span class="icon is-small is-left">
          <mat-icon>account_box</mat-icon>
        </span>
      </p>
      <p *ngIf="submitted && form.nome.errors" class="help is-danger">O nome é obrigatório</p>
    </div>
    <div class="field">
      <label class="label">Email</label>
      <p class="control is-expanded has-icons-left">
        <input formControlName="email" class="input" type="email" placeholder="Email">
        <span class="icon is-small is-left">
          <mat-icon>email</mat-icon>
        </span>
      </p>
      <p *ngIf="form.email.errors" class="help is-danger"></p>
    </div>

    <div class="field is-narrow">
      <label for="" class="label">&nbsp;</label>
      <p class="control">
        <button type="submit" class="button is-primary is-outlined">Enviar</button>
      </p>
    </div>

  </form>
</div>


<div class="card">
  <div class="card-content">
    <div [formGroup]="searchForm" (keydown)="handleKey($event)" class="field is-grouped mb-6">
      <div class="control is-expanded has-icons-right">
        <input class="input" formControlName="name" type="text" placeholder="Nome do aluno">
        <span class="icon is-right">
          <mat-icon (click)="searchForm.controls.name.setValue('')" style="cursor: pointer; pointer-events: all;">backspace</mat-icon>
        </span>
      </div>

      <div class="control">
        <input class="input" formControlName="id" type="text" placeholder="Id do aluno">
      </div>

      <div class="control">
        <button class="button is-info" (click)="search()">
          <span class="icon is-small is-left">
            <mat-icon>search</mat-icon>
          </span>
        </button>
      </div>
    </div>

    <div class="mat-elevation-z0">
      <table mat-table [dataSource]="data" matSort (matSortChange)="handleSort($event)">
        <ng-container matColumnDef="alunoId">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="">ID</th>
          <td mat-cell *matCellDef="let element" class="">{{ element.alunoId }}</td>
        </ng-container>

        <ng-container matColumnDef="nome">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="">Nome</th>
          <td mat-cell *matCellDef="let element" class="">{{ element.nome }}</td>
        </ng-container>

         <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="">Email</th>
          <td mat-cell *matCellDef="let element" class="">{{ element.email }}</td>
        </ng-container>

        <ng-container matColumnDef="acoes">
          <th class="" mat-header-cell *matHeaderCellDef>Ações</th>
          <td class="" mat-cell *matCellDef="let element">
            <div class="buttons">
              <button class="button is-primary is-small is-size-7" (click)="editAluno(element)" matTooltip="Editar">
                <span class="icon is-small">
                  <mat-icon>create</mat-icon>
                </span>
              </button>
              <button class="button is-danger is-small" matTooltip="Excluir" (click)="openDeleteDialog(element)">
                <span class="icon">
                  <mat-icon>delete</mat-icon>
                </span>
              </button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="tableColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: tableColumns"></tr>
      </table>
    </div>
    <mat-paginator [pageSizeOptions]="[5, 10, 20, 50]" showFirstLastButtons [pageIndex]="paginationData?.CurrentPage - 1" [pageSize]="pageSize" [length]="paginationData?.TotalCount" (page)="handlePage($event)"></mat-paginator>
  </div>
</div>
